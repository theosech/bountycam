(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[749],{9375:(e,t,r)=>{Promise.resolve().then(r.bind(r,5323))},5323:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var l=r(5155),n=r(2115),a=r(6046),o=r(7711),s=r(3259);let i=(0,o.default)(()=>Promise.all([r.e(484),r.e(761),r.e(13)]).then(r.bind(r,5013)),{loadableGenerated:{webpack:()=>[5013]},ssr:!1});function d(){let[e,t]=(0,n.useState)(""),[r,o]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[c,f]=(0,n.useState)(null),[m,p]=(0,n.useState)(!1),[b,h]=(0,n.useState)(null),x=(0,a.useRouter)(),g=(0,s.U)(),y=async t=>{if(t.preventDefault(),!c){h("Please select a location on the map");return}p(!0),h(null);try{let{data:{user:t}}=await g.auth.getUser();if(!t)throw Error("Not authenticated");let{data:l,error:n}=await g.from("bounties").insert({creator_id:t.id,title:e,description:r,amount:parseInt(d),lat:c[0],lng:c[1],location:"POINT(".concat(c[1]," ").concat(c[0],")")}).select().single();if(n)throw n;x.push("/dashboard")}catch(e){h(e.message)}finally{p(!1)}};return(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Create New Bounty"}),(0,l.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,l.jsx)("input",{id:"title",type:"text",value:e,onChange:e=>t(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Film sunset at Venice Beach"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),(0,l.jsx)("textarea",{id:"description",value:r,onChange:e=>o(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Provide additional details about what you're looking for..."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Bounty Amount (points)"}),(0,l.jsx)("input",{id:"amount",type:"number",value:d,onChange:e=>u(e.target.value),required:!0,min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"50"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location (click on map to select)"}),(0,l.jsx)("div",{className:"h-96 border border-gray-300 rounded-md overflow-hidden",children:(0,l.jsx)(i,{onMapClick:(e,t)=>{f([e,t])},clickedPosition:c})}),c&&(0,l.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Selected location: ",c[0].toFixed(4),", ",c[1].toFixed(4)]})]}),b&&(0,l.jsx)("div",{className:"text-red-600 text-sm",children:b}),(0,l.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,l.jsx)("button",{type:"button",onClick:()=>x.push("/dashboard"),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:m?"Creating...":"Create Bounty"})]})]})]})})})}},3259:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});var l=r(9956);function n(){return(0,l.createBrowserClient)("https://mrkagdenrvwgjbzatdfx.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ya2FnZGVucnZ3Z2piemF0ZGZ4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3MjE1ODAsImV4cCI6MjA2NDI5NzU4MH0.oY_lJ5jsq0FH91H2TZpTu09JURpGE4Yqsw3uzrgaZ_w")}},7711:(e,t,r)=>{"use strict";r.d(t,{default:()=>n.a});var l=r(1956),n=r.n(l)},1956:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let l=r(306)._(r(580));function n(e,t){var r;let n={};"function"==typeof e&&(n.loader=e);let a={...n,...t};return(0,l.default)({...a,modules:null==(r=a.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let l=r(3719);function n(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new l.BailoutToCSRError(t);return r}},580:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let l=r(5155),n=r(2115),a=r(9827),o=r(9214);function s(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},r=(0,n.lazy)(()=>t.loader().then(s)),d=t.loading;function u(e){let s=d?(0,l.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,u=i?n.Suspense:n.Fragment,c=t.ssr?(0,l.jsxs)(l.Fragment,{children:["undefined"==typeof window?(0,l.jsx)(o.PreloadChunks,{moduleIds:t.modules}):null,(0,l.jsx)(r,{...e})]}):(0,l.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(r,{...e})});return(0,l.jsx)(u,{...i?{fallback:s}:{},children:c})}return u.displayName="LoadableComponent",u}},9214:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return s}});let l=r(5155),n=r(7650),a=r(5861),o=r(8284);function s(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=a.workAsyncStorage.getStore();if(void 0===r)return null;let s=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files;s.push(...t)}}return 0===s.length?null:(0,l.jsx)(l.Fragment,{children:s.map(e=>{let t=r.assetPrefix+"/_next/"+(0,o.encodeURIPath)(e);return e.endsWith(".css")?(0,l.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,n.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[191,441,517,358],()=>t(9375)),_N_E=e.O()}]);